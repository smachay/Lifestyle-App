import React, { Component } from 'react';
//import { render } from '@testing-library/react';

class trainingPlan extends Component {
  constructor(props) {
    super(props);
    this.state = {
      
        exercise: "",
        sets: 0,
        reps: 0,
      
    };
  }
passEditedValue(){
  const editItem={
        exercise: this.state.exercise,
        sets: this.state.sets,
        reps: this.state.reps,
  }
  this.props.callbackFromParent(editItem)
}
handleChange = ({target}) =>{
    //update react state 
    this.setState({ [target.name]: target.value });
}
 
  render() {
    return (
      <div className="editForm">
        Edytuj swój plan
        
        <br/>
        <input
            type="text"
            name="exercise"
            placeholder="Wpisz nazwę ćwiczenia..."
            value={this.state.exercise}
            onChange={this.handleChange}
        />
        <br/>
        Ilość serii:
        <input
          type="number"
          name="sets"
          value={this.state.sets}
          onChange={this.handleChange}
        />
        <br/>
        Ilość powtórzeń:
        <input
          type="number"
          name="reps"
          value={this.state.reps}
          onChange={this.handleChange}
        />
        <br/>
        <button onClick={() => this.passEditedValue()}>
          Dodaj
        </button>
        
      </div>
    );
  }
}



export default trainingPlan;


import React, { Component } from 'react';
import EditForm from './editForm';
//import { render } from '@testing-library/react';

class trainingPlan extends Component {
  constructor(props) {
    super(props);
    this.state = {
      exercise: "",
      sets: 0,
      reps: 0,
      list: [],
      editId: null,
      editMode: false,
    };
  }

  myCallback = (editItem) => {
      //find the object in the array
  const elementsIndex = this.state.list.findIndex(e => e.id === this.state.editId )
  
  //copy current list of items
  let updatedList = [...this.state.list];

  updatedList[elementsIndex] = {...updatedList[elementsIndex], exercise: editItem.exercise, reps: editItem.reps, sets: editItem.sets};
  this.setState({ 
    list: updatedList,
    editId: null,
    editMode: false,
     
  });
  }

  setEditMode(id){
    this.setState({ 
      editMode: true,
      editId: id 
    });
    
  }

  deleteItem(id) {
    //copy current list of items
    const list = [...this.state.list];

    //filter out item being deleted
    const updatedList = list.filter(item => item.id !== id)

    this.setState({ list: updatedList });
  }

  
  handleChange = ({ target }) => {
    //update react state 
    this.setState({ [target.name]: target.value });
  };

  addItem() {
    //Create item with uniqe id
    console.log(this.state.test);
    const newItem = {
      id: 1 + Math.floor(Math.random() * 101 + 0),
      exercise: this.state.exercise,
      sets: this.state.sets,
      reps: this.state.reps
    }
    //Copy of current list of items
    const list = [...this.state.list]

    //add new item to list
    list.push(newItem);

    //update state with new list and reset newItem input 
    this.setState({
      list,
      exercise: "",
      sets: 0,
      reps: 0,

    });
    console.log(newItem);
  }


  render() {
    return (
      
        <React.Fragment>
        {
          this.state.editMode === false ? 
          <div className="trainingPlan">
          Stwórz własny plan treningowy
          <br />
  
          <input
            type="text"
            name="exercise"
            placeholder="Wpisz nazwę ćwiczenia..."
            value={this.state.exercise}
            onChange={this.handleChange}
            
          />
                Ilość serii:
          <input
            type="number"
            name="sets"
  
            value={this.state.sets}
            onChange={this.handleChange}
          />
                Ilość powtórzeń:
          <input
            type="number"
            name="reps"
            value={this.state.reps}
            onChange={this.handleChange}
          />
          <button onClick={() => this.addItem()}>
            Dodaj
              </button>
          <ol>
            {this.state.list.map(item => {
              return (
                <li key={item.id}>
                  Ćwiczenie:{item.exercise}<br />
                    Ilość seii:{item.sets}<br />
                    Ilość Powtórzeń:{item.reps}<br />
                  <button onClick={() => this.deleteItem(item.id)}>
                    Usuń
                  </button>
                  <button onClick={() => this.setEditMode(item.id)}>
                    Edytuj
                  </button>
                </li>
              );
            })}
          </ol>
          </div>
            :
            <EditForm 
            callbackFromParent={this.myCallback}>
            </EditForm>
        }
      </React.Fragment>
    );
  }
}



export default trainingPlan;


// editItem(id){

// }